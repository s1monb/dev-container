#!/usr/bin/env bash

if [[ $# -eq 1 ]]; then
    selected=$1
else
	selected=$(
	  while IFS= read -r dir; do
		[[ -z "$dir" || "$dir" =~ ^# ]] && continue
		eval dir="$dir"
		find "$dir" -mindepth 1 -type d -exec test -e '{}/.git' ';' -print -prune
	  done < ~/.devconfig | fzf
	)
fi

if [[ -z $selected ]]; then
    exit 0
fi

selected_name=$(basename "$selected" | tr . _)

cd $selected
tmux
